//Главный модуль программы параллельного вычисления интеграла синуса
//методом прямоугольников.

//Распростаняется под лиценизией BSD
//Автор: Белявцев И.П.



#include <stdio.h>
#include <math.h>
#include <time.h>

int main (int argc, char* argv[])
{

	//Объявляем границы интервала интегрирования
	double a, b;

	//Читаем границы у пользователя с клавиатуры
	printf ("Введите нижнюю границу интегрирования:");
	scanf ("%lf",&a);
	printf ("Введите верхнюю границу интегрирования:");
	scanf ("%lf",&b);

	//Согласно формулы Ньютона-Лейбница определенный интеграл
	//на интервале [a,b] равен разности первообразной в точке
	//b и в точке a
	//Для функции sin(x) первообразная -cos(x)
	//Исходя из этого вычислим определенный интеграл
	double analitic;
	analitic = -cos(b)+cos(a);

	//Выводим полученное аналитическое значение
	printf ("Аналитическое значение:%10.9lf\n",analitic);
 
	//Объявляем переменную количества отрезков разбиения
	double n;
	//Читаем количество отрезков с клавиатуры  у пользователя
	printf ("Введите количество отрезков разбиения:");
	scanf ("%lf",&n);

	//Начинаем отсчет времени выполнения
	clock_t tStart = clock();
	//Находим ширину отрезка
	double delta = (b-a)/n;
	//Объявляем накопитель
	double numerical = 0.0;
	//Суммируем значения высот прямоугольников
	for (double x = a; x < b; x += delta)
		numerical += sin(x);
	//Умножаем на ширину отрезков
	numerical *= delta;
	//Останавливаем отсчет времени выполнения
	clock_t tStop = clock();
	//Выводим полученное численное значение
	printf ("Численное значение:%10.9lf\n",numerical);

	//Выводим время работы программы
	printf("Численный расчет выполнен за %.3f сек", (float)(tStop - tStart) / CLOCKS_PER_SEC);

	
	//Корректное завершение программы
	return 0;
}

